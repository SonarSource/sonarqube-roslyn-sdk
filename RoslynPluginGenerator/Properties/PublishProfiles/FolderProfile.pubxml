<?xml version="1.0" encoding="utf-8"?>
<!-- https://go.microsoft.com/fwlink/?LinkID=208121. -->
<Project>
  <PropertyGroup>
    <Configuration>Release</Configuration>
    <Platform>Any CPU</Platform>
    <PublishDir>bin\Release\net48\publish\</PublishDir>
    <PublishProtocol>FileSystem</PublishProtocol>
    <_TargetId>Folder</_TargetId>
  </PropertyGroup>
  <Target Name="ZipPublishOutput" BeforeTargets="Publish">
    <ItemGroup>
      <ThirdPartyLicenceFiles Include="$(ProjectDir)\..\Licenses\THIRD_PARTY_LICENSES\*.txt"/>
    </ItemGroup>
    <Copy SourceFiles="$(ProjectDir)\..\LICENSE.txt" DestinationFolder="$(PublishDir)\licenses" />
    <Copy SourceFiles="@(ThirdPartyLicenceFiles)" DestinationFolder="$(PublishDir)\licenses\THIRD_PARTY_LICENSES\%(RecursiveDir)" />
    <PropertyGroup>
      <!-- 
        AbsolutePublishDir can also be used in CI by writing the property value to the console: dotnet publish -getProperty:AbsolutePublishDir 
        https://learn.microsoft.com/en-us/visualstudio/msbuild/evaluate-items-and-properties
      -->
      <AbsolutePublishDir>$([MSBuild]::NormalizeDirectory($(PublishDir)))</AbsolutePublishDir>
    </PropertyGroup>
    <Message Importance="high" Text="Copied licence files to $(AbsolutePublishDir)." />
  </Target>
</Project>